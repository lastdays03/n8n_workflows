{
  "name": "YouTube Tech Trends - Keyword Search",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * *"
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [250, 300]
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "keywords",
              "value": "={{ [\"kubernetes\", \"docker\", \"terraform\", \"AWS\", \"React\", \"Next.js\", \"FastAPI\", \"Python\", \"TypeScript\", \"AI\", \"Machine Learning\", \"MLOps\"] }}"
            }
          ],
          "number": [
            {
              "name": "daysToSearch",
              "value": 7
            },
            {
              "name": "maxResultsPerKeyword",
              "value": 5
            }
          ]
        },
        "options": {}
      },
      "id": "config-node",
      "name": "Configuration",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [450, 300],
      "notes": "ì—¬ê¸°ì„œ ê²€ìƒ‰í•  ê¸°ìˆ  í‚¤ì›Œë“œë¥¼ ìˆ˜ì •í•˜ì„¸ìš”"
    },
    {
      "parameters": {
        "fieldToSplitOut": "keywords",
        "options": {}
      },
      "id": "split-keywords",
      "name": "Split Keywords",
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "operation": "search",
        "searchQuery": "={{ $json.keywords }}",
        "returnAll": false,
        "maxResults": "={{ $node['Configuration'].json.maxResultsPerKeyword }}",
        "options": {
          "publishedAfter": "={{ $now.minus({ days: $node['Configuration'].json.daysToSearch }).toISO() }}",
          "order": "date",
          "videoType": "video"
        }
      },
      "id": "youtube-search",
      "name": "YouTube Search",
      "type": "n8n-nodes-base.youtube",
      "typeVersion": 1,
      "position": [850, 300],
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "YOUR_YOUTUBE_CREDENTIAL_ID",
          "name": "YouTube OAuth2 account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ì¤‘ë³µ ì œê±° ë° ë°ì´í„° ì •ì œ\nconst items = $input.all();\nconst uniqueVideos = {};\n\nfor (const item of items) {\n  const videoId = item.json.id?.videoId || item.json.id;\n  \n  if (!uniqueVideos[videoId]) {\n    uniqueVideos[videoId] = {\n      videoId: videoId,\n      title: item.json.snippet?.title || '',\n      description: item.json.snippet?.description || '',\n      channelTitle: item.json.snippet?.channelTitle || '',\n      channelId: item.json.snippet?.channelId || '',\n      publishedAt: item.json.snippet?.publishedAt || '',\n      thumbnails: item.json.snippet?.thumbnails || {},\n      videoUrl: `https://www.youtube.com/watch?v=${videoId}`,\n      searchKeyword: item.json.keywords\n    };\n  }\n}\n\nreturn Object.values(uniqueVideos).map(video => ({ json: video }));"
      },
      "id": "deduplicate",
      "name": "Deduplicate & Format",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1050, 300]
    },
    {
      "parameters": {
        "resource": "database",
        "operation": "getAll",
        "databaseId": "YOUR_NOTION_DATABASE_ID",
        "returnAll": false,
        "limit": 100,
        "options": {
          "filter": {
            "property": "URL",
            "type": "url",
            "url": {
              "equals": "={{ $json.videoUrl }}"
            }
          }
        }
      },
      "id": "check-notion",
      "name": "Check Notion for Duplicates",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.1,
      "position": [1250, 300],
      "credentials": {
        "notionApi": {
          "id": "YOUR_NOTION_CREDENTIAL_ID",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "filter-new-videos",
              "leftValue": "={{ $json.object }}",
              "rightValue": "list",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "filter-empty-results",
              "leftValue": "={{ $json.results.length }}",
              "rightValue": "0",
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "filter-new",
      "name": "Filter New Videos Only",
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2,
      "position": [1450, 300]
    },
    {
      "parameters": {
        "operation": "getTranscript",
        "videoId": "={{ $json.videoId }}",
        "options": {
          "languages": ["ko", "en"]
        }
      },
      "id": "get-transcript",
      "name": "Get YouTube Transcript",
      "type": "@n8n/n8n-nodes-langchain.youtubeTranscript",
      "typeVersion": 1,
      "position": [1650, 300],
      "continueOnFail": true,
      "notes": "ìë§‰ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë„ ê³„ì† ì§„í–‰"
    },
    {
      "parameters": {
        "jsCode": "// ìë§‰ í…ìŠ¤íŠ¸ ê²°í•© ë° ìš”ì•½ì„ ìœ„í•œ ì¤€ë¹„\nconst item = $input.first().json;\n\nlet transcriptText = '';\nif (item.transcript && Array.isArray(item.transcript)) {\n  transcriptText = item.transcript.map(t => t.text).join(' ');\n} else if (item.error) {\n  transcriptText = 'NO_TRANSCRIPT_AVAILABLE';\n}\n\n// í† í° ì œí•œì„ ìœ„í•´ ìµœëŒ€ 4000ìë¡œ ì œí•œ\nif (transcriptText.length > 4000) {\n  transcriptText = transcriptText.substring(0, 4000) + '...';\n}\n\nreturn {\n  json: {\n    ...item,\n    transcriptText: transcriptText,\n    hasTranscript: transcriptText !== 'NO_TRANSCRIPT_AVAILABLE'\n  }\n};"
      },
      "id": "prepare-for-ai",
      "name": "Prepare Transcript",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1850, 300]
    },
    {
      "parameters": {
        "resource": "text",
        "operation": "message",
        "modelId": "gpt-4o-mini",
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "ë‹¹ì‹ ì€ ê¸°ìˆ  ì½˜í…ì¸  ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ìœ íŠœë¸Œ ê¸°ìˆ  ë™ì˜ìƒì˜ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ í•µì‹¬ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤."
            },
            {
              "role": "user",
              "content": "=ì•„ë˜ ìœ íŠœë¸Œ ë™ì˜ìƒì„ ë¶„ì„í•´ì£¼ì„¸ìš”:\n\nì œëª©: {{ $json.title }}\nì±„ë„: {{ $json.channelTitle }}\nì„¤ëª…: {{ $json.description }}\n{{ $json.hasTranscript ? 'ìë§‰: ' + $json.transcriptText : '' }}\n\në‹¤ìŒ í˜•ì‹ìœ¼ë¡œ í•œêµ­ì–´ë¡œ ìš”ì•½í•´ì£¼ì„¸ìš”:\n\n1. í•µì‹¬ ë‚´ìš© (3-5ë¬¸ì¥)\n2. ì£¼ìš” ê¸°ìˆ /í‚¤ì›Œë“œ\n3. ë‚œì´ë„ (ì´ˆê¸‰/ì¤‘ê¸‰/ê³ ê¸‰)\n4. ì‹¤ë¬´ ì ìš©ë„ (ìƒ/ì¤‘/í•˜)\n5. ì¶”ì²œ ëŒ€ìƒ"
            }
          ]
        },
        "options": {
          "temperature": 0.3,
          "maxTokens": 500
        }
      },
      "id": "ai-summary",
      "name": "AI Summary (OpenAI)",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.3,
      "position": [2050, 300],
      "credentials": {
        "openAiApi": {
          "id": "YOUR_OPENAI_CREDENTIAL_ID",
          "name": "OpenAI account"
        }
      },
      "notes": "OpenAI API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. Claude APIë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë…¸ë“œë¥¼ ë³€ê²½í•˜ì„¸ìš”."
    },
    {
      "parameters": {
        "jsCode": "// AI ì‘ë‹µ íŒŒì‹± ë° ìµœì¢… ë°ì´í„° êµ¬ì¡°í™”\nconst item = $input.first().json;\nconst aiResponse = item.message?.content || item.text || '';\n\nreturn {\n  json: {\n    title: item.title,\n    url: item.videoUrl,\n    channelName: item.channelTitle,\n    channelId: item.channelId,\n    publishedDate: item.publishedAt,\n    collectedDate: new Date().toISOString(),\n    searchKeyword: item.searchKeyword,\n    aiSummary: aiResponse,\n    description: item.description,\n    thumbnailUrl: item.thumbnails?.high?.url || item.thumbnails?.default?.url || '',\n    hasTranscript: item.hasTranscript,\n    status: 'ë¯¸í™•ì¸'\n  }\n};"
      },
      "id": "format-for-notion",
      "name": "Format for Notion",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2250, 300]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "create",
        "databaseId": "YOUR_NOTION_DATABASE_ID",
        "properties": {
          "property": [
            {
              "key": "ì œëª©",
              "type": "title",
              "title": "={{ $json.title }}"
            },
            {
              "key": "URL",
              "type": "url",
              "url": "={{ $json.url }}"
            },
            {
              "key": "ì±„ë„",
              "type": "richText",
              "richText": "={{ $json.channelName }}"
            },
            {
              "key": "ë“±ë¡ì¼",
              "type": "date",
              "date": "={{ $json.publishedDate }}"
            },
            {
              "key": "ìˆ˜ì§‘ì¼",
              "type": "date",
              "date": "={{ $json.collectedDate }}"
            },
            {
              "key": "ê¸°ìˆ íƒœê·¸",
              "type": "multiSelect",
              "multiSelect": "={{ [$json.searchKeyword] }}"
            },
            {
              "key": "AIìš”ì•½",
              "type": "richText",
              "richText": "={{ $json.aiSummary }}"
            },
            {
              "key": "ìƒíƒœ",
              "type": "select",
              "select": "={{ $json.status }}"
            },
            {
              "key": "ìë§‰ì—¬ë¶€",
              "type": "checkbox",
              "checkbox": "={{ $json.hasTranscript }}"
            }
          ]
        },
        "options": {
          "icon": {
            "type": "emoji",
            "emoji": "ğŸ¥"
          }
        }
      },
      "id": "create-notion-page",
      "name": "Create Notion Page",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.1,
      "position": [2450, 300],
      "credentials": {
        "notionApi": {
          "id": "YOUR_NOTION_CREDENTIAL_ID",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ì‹¤í–‰ ê²°ê³¼ í†µê³„ ìƒì„±\nconst items = $input.all();\n\nconst stats = {\n  totalProcessed: items.length,\n  successCount: items.filter(i => i.json.id).length,\n  failCount: items.filter(i => !i.json.id).length,\n  keywords: [...new Set(items.map(i => i.json.properties?.['ê¸°ìˆ íƒœê·¸']?.multi_select?.[0]?.name || 'Unknown'))],\n  timestamp: new Date().toISOString()\n};\n\nreturn { json: stats };"
      },
      "id": "generate-stats",
      "name": "Generate Statistics",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2650, 300]
    },
    {
      "parameters": {
        "operation": "sendMessage",
        "channel": "#tech-trends",
        "text": "=ğŸ¯ YouTube ê¸°ìˆ  íŠ¸ë Œë“œ ìˆ˜ì§‘ ì™„ë£Œ!\n\nâœ… ì²˜ë¦¬ëœ ë™ì˜ìƒ: {{ $json.totalProcessed }}ê°œ\nâœ… Notion ì €ì¥ ì„±ê³µ: {{ $json.successCount }}ê°œ\nâŒ ì‹¤íŒ¨: {{ $json.failCount }}ê°œ\n\nğŸ·ï¸ ìˆ˜ì§‘ í‚¤ì›Œë“œ: {{ $json.keywords.join(', ') }}\n\nâ° ìˆ˜ì§‘ ì‹œê°: {{ $json.timestamp }}",
        "otherOptions": {}
      },
      "id": "slack-notification",
      "name": "Slack Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [2850, 300],
      "credentials": {
        "slackApi": {
          "id": "YOUR_SLACK_CREDENTIAL_ID",
          "name": "Slack account"
        }
      },
      "disabled": true,
      "notes": "ì„ íƒì‚¬í•­: Slack ì•Œë¦¼ì´ í•„ìš”í•œ ê²½ìš° í™œì„±í™”í•˜ê³  credentialsë¥¼ ì„¤ì •í•˜ì„¸ìš”"
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Configuration": {
      "main": [
        [
          {
            "node": "Split Keywords",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Keywords": {
      "main": [
        [
          {
            "node": "YouTube Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "YouTube Search": {
      "main": [
        [
          {
            "node": "Deduplicate & Format",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Deduplicate & Format": {
      "main": [
        [
          {
            "node": "Check Notion for Duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Notion for Duplicates": {
      "main": [
        [
          {
            "node": "Filter New Videos Only",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter New Videos Only": {
      "main": [
        [
          {
            "node": "Get YouTube Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get YouTube Transcript": {
      "main": [
        [
          {
            "node": "Prepare Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Transcript": {
      "main": [
        [
          {
            "node": "AI Summary (OpenAI)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Summary (OpenAI)": {
      "main": [
        [
          {
            "node": "Format for Notion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format for Notion": {
      "main": [
        [
          {
            "node": "Create Notion Page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Notion Page": {
      "main": [
        [
          {
            "node": "Generate Statistics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Statistics": {
      "main": [
        [
          {
            "node": "Slack Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": ""
  },
  "staticData": null,
  "tags": [
    {
      "name": "YouTube",
      "id": "tag-youtube"
    },
    {
      "name": "Tech Trends",
      "id": "tag-tech"
    },
    {
      "name": "Automation",
      "id": "tag-automation"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2026-01-14T00:00:00.000Z",
  "versionId": "1"
}
